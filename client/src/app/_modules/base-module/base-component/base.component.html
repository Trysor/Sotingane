
<header class="topHeader">
  <button mat-icon-button *ngIf="isMobile | async" (click)="sidenavLeft.toggle(); sidenavRight.close()" class="navToggle">
    <mat-icon aria-label="Open Navigation">menu</mat-icon>
  </button>
  <a routerLink="/"><mat-icon svgIcon="logo" ngClass="logo"></mat-icon>otingane</a>
  <button mat-icon-button *ngIf="isMobile | async" (click)="sidenavRight.toggle(); sidenavLeft.close()" class="navToggle right">
    <mat-icon aria-label="Open Navigation">person</mat-icon>
  </button>
</header>

<mat-sidenav-container ngClass="sidenavContainer">
  <!-- TEMPLATES -->
  <ng-template #navigationTemplate>
    <mat-card>
      <mat-card-content>
        <mat-nav-list dense>
          <ng-container *ngIf="contentSubject | async as nav">
            <a mat-list-item *ngFor="let navEntry of nav.rootContent"
              routerLink="/{{navEntry.route}}"
              routerLinkActive="active">{{ navEntry.title }}</a>

            <ng-container *ngFor="let folderEntry of nav.folders">
              <h2 mat-subheader>{{ folderEntry.title }}</h2>
              <a mat-list-item *ngFor="let navEntry of folderEntry.content"
                routerLink="/{{navEntry.route}}"
                routerLinkActive="active"
                ngClass="subItem">{{ navEntry.title }}</a>
            </ng-container>
          </ng-container>

          <ng-container *ngIf="steamServersSubject | async as steamServers">
            <ng-container *ngIf="steamServers && steamServers.length > 0">
              <h2 mat-subheader>Steam Servers</h2>

              <a mat-list-item *ngFor="let server of steamServers"
              routerLink="/steam/{{server.route}}"
              routerLinkActive="active"
              ngClass="subItem">{{ server.title }}</a>
            </ng-container>
          </ng-container>
        </mat-nav-list>
      </mat-card-content>
    </mat-card>
  </ng-template>

  <ng-template #userTemplate>
    <app-login-component></app-login-component>
    <app-control-panel-component></app-control-panel-component>
  </ng-template>


  <mat-sidenav #sidenavLeft mode="over" position="start" ngClass="sidenav">
    <ng-container *ngIf="isMobile | async">
      <ng-container *ngTemplateOutlet="navigationTemplate"></ng-container>
    </ng-container>
  </mat-sidenav>

  <mat-sidenav #sidenavRight mode="over" position="end" ngClass="sidenav">
    <ng-container *ngIf="isMobile | async">
      <ng-container *ngTemplateOutlet="userTemplate"></ng-container>
    </ng-container>
  </mat-sidenav>

  <div class="wrapper" [ngClass]="{ mobile: (isMobile | async) }">
    <!-- NAVIGATION BAR -->
    <nav class="nav left" *ngIf="!(isMobile | async)">
      <ng-container *ngTemplateOutlet="navigationTemplate"></ng-container>
    </nav>

    <!-- CONTENT -->
    <main class="main center">
      <router-outlet></router-outlet>
    </main>

    <!-- USER -->
    <aside class="user right" *ngIf="!(isMobile | async)">
      <ng-container *ngTemplateOutlet="userTemplate"></ng-container>
    </aside>
  </div>

  <!-- FOOTER -->
  <app-footer-component class="footer"></app-footer-component>
</mat-sidenav-container>
