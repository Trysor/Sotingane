<app-header-component (leftNav)="toggleLeftNav()" (rightNav)="toggleRightNav()"></app-header-component>
<app-loadingbar-component></app-loadingbar-component>

<mat-sidenav-container ngClass="sidenavContainer">
  <!-- MOBILE LEFT -->
  <mat-sidenav #sidenavLeft mode="over" position="start" ngClass="sidenav" (swipeleft)="closeSideNavs()" [style.touch-action]="'pan-y'">
    <app-nav-component *ngIf="mobileService.isMobile() | async"></app-nav-component>
  </mat-sidenav>
  <!-- MOBILE RIGHT -->
  <mat-sidenav #sidenavRight mode="over" position="end" ngClass="sidenav" (swiperight)="closeSideNavs()" [style.touch-action]="'pan-y'">
    <ng-container *ngIf="mobileService.isMobile() | async">
      <mat-card>
        <mat-card-header *ngIf="authService.getUser() | async as user" ngClass="mobileLoginInfo">
          <mat-card-title>{{ user.username }}</mat-card-title>
          <mat-card-subtitle>{{ user.role }}</mat-card-subtitle>
          <mat-icon mat-card-avatar color="accent">person</mat-icon>
        </mat-card-header>

        <mat-card-content>
          <app-control-panel-component></app-control-panel-component>
        </mat-card-content>
      </mat-card>
    </ng-container>

  </mat-sidenav>

  <!-- MOBILE SWIPE TRIGGERS -->
  <div *ngIf="mobileService.isMobile() | async" class="swipe left" (swiperight)="sidenavLeft.open()"></div>
  <div *ngIf="mobileService.isMobile() | async" class="swipe right" (swipeleft)="sidenavRight.open()"></div>


  <div class="wrapper" [ngClass]="{ mobile: (mobileService.isMobile() | async) }">
    <!-- NAVIGATION BAR -->
    <div class="nav left" *ngIf="!(mobileService.isMobile() | async)">
      <app-nav-component></app-nav-component>
    </div>
    <!-- CONTENT -->
    <main class="main center">
      <router-outlet></router-outlet>
    </main>
  </div>

  <!-- FOOTER -->
  <app-footer-component class="footer"></app-footer-component>
</mat-sidenav-container>
